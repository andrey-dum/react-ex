(this["webpackJsonpreact-ex"]=this["webpackJsonpreact-ex"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getPayMethods",(function(){return k})),n.d(a,"setAmount",(function(){return R})),n.d(a,"setLoading",(function(){return D})),n.d(a,"setStep",(function(){return B})),n.d(a,"setError",(function(){return F})),n.d(a,"confirm",(function(){return I})),n.d(a,"fetchPayMethods",(function(){return L})),n.d(a,"fetchAmount",(function(){return U})),n.d(a,"sendRequest",(function(){return X}));var c=n(0),r=n.n(c),i=n(7),s=n.n(i),o=n(5),u=n(4),d=n(24),l=n(2),j="pm/GET_PAYMENT_METHODS",b="pm/SET_AMOUNT",h="pm/SET_STEP",v="pm/SET_LOADING",p="pm/SET_ERROR",m="pm/CONFIRM",O={payMethods:{},loading:!1,error:null,sellAmount:0,buyAmount:0,step:1,base:"invoice",amount:0,invoicePayMethod:0,withdrawPayMethod:0};var f=Object(u.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(l.a)(Object(l.a)({},e),{},{payMethods:Object(l.a)({},t.payload),invoicePayMethod:t.payload.invoice[0].id,withdrawPayMethod:t.payload.withdraw[0].id});case b:return Object(l.a)(Object(l.a)({},e),t.payload);case v:return Object(l.a)(Object(l.a)({},e),{},{loading:t.payload});case h:return Object(l.a)(Object(l.a)({},e),{},{step:t.payload});case p:return Object(l.a)(Object(l.a)({},e),{},{error:t.payload});case m:return Object(l.a)(Object(l.a)({},e),{},{sellAmount:0,buyAmount:0,step:3,base:"invoice",amount:0});default:return e}}}),y="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):u.d,x=Object(u.e)(f,y(Object(u.a)(d.a))),w=(n(38),n(39),n(6)),g=n.n(w),N=n(8),M=n(25),P=n.n(M),A=n(26),E=n.n(A),S=P.a.create({baseURL:"https://involve.software/test_front/api/"}),_=function(){return S.get("payMethods").then((function(e){return e.data}))},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(l.a)({},e);return S.get("payMethods/calculate?".concat(E.a.stringify(t))).then((function(e){return e}))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S.post("/bids",e).then((function(e){return e.data}))};function k(e){return{type:j,payload:e}}function R(e){return{type:b,payload:e}}function D(e){return{type:v,payload:e}}function B(e){return{type:h,payload:e}}function F(e){return{type:p,payload:e}}function I(){return{type:m}}function L(){return function(){var e=Object(N.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D(!0)),e.prev=1,e.next=4,_();case 4:n=e.sent,t(k(n)),t(D(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t(D(!1));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}function U(){return function(){var e=Object(N.a)(g.a.mark((function e(t,n){var a,c,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D(!0)),a=n(),c=a.app,r={base:c.base,amount:"invoice"===c.base?c.sellAmount:c.buyAmount,invoicePayMethod:Number(c.invoicePayMethod),withdrawPayMethod:Number(c.withdrawPayMethod)},e.prev=3,e.next=6,C(r);case 6:i=e.sent,"invoice"===r.base?t(R({buyAmount:i.data.amount})):t(R({sellAmount:i.data.amount})),t(F(null)),t(D(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),t(F({message:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435!"})),t(D(!1));case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t,n){return e.apply(this,arguments)}}()}function X(){return function(){var e=Object(N.a)(g.a.mark((function e(t,n){var a,c,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D(!0)),a=n(),c=a.app,r={base:c.base,amount:Number(c.sellAmount),invoicePayMethod:Number(c.invoicePayMethod),withdrawPayMethod:Number(c.withdrawPayMethod)},e.prev=3,e.next=6,T(r);case 6:"Success"===(i=e.sent).message?(t(B(2)),t(F(null))):t(F(i.message)),t(D(!1)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),t(F(e.t0)),t(D(!1));case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()}var H=Object(l.a)({},a),q=function(){var e=Object(o.b)();return Object(u.b)(H,e)},G=n(1);var J=function(){var e,t,n=Object(o.c)((function(e){return e.app})),a=q(),c=a.setStep,r=a.confirm,i=null===(e=n.payMethods.invoice)||void 0===e?void 0:e.find((function(e){return e.id===n.invoicePayMethod})),s=null===(t=n.payMethods.withdraw)||void 0===t?void 0:t.find((function(e){return e.id===n.withdrawPayMethod}));return Object(G.jsxs)("div",{className:"details",children:[Object(G.jsx)("h2",{className:"title",children:"Details"}),Object(G.jsxs)("div",{className:"container",children:[Object(G.jsxs)("div",{className:"detailsBlock",children:[Object(G.jsxs)("div",{className:"detailsRow",children:[Object(G.jsx)("h4",{children:"Sell"}),Object(G.jsxs)("div",{children:[n.sellAmount," - ",null===i||void 0===i?void 0:i.name]})]}),Object(G.jsxs)("div",{className:"detailsRow",children:[Object(G.jsx)("h4",{children:"Buy"}),n.buyAmount," - ",null===s||void 0===s?void 0:s.name]})]}),Object(G.jsxs)("div",{className:"detailsBtns",children:[Object(G.jsx)("button",{className:"btn outlined",onClick:function(){return c(1)},children:"Cancel"}),Object(G.jsx)("button",{className:"btn",onClick:r,children:"Confirm"})]})]})]})};n(73);var V=function(){return Object(G.jsxs)("div",{className:"lds-ring",children:[Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{}),Object(G.jsx)("div",{})]})},Y=n(27);var W=function(){var e=q().setStep;return Object(G.jsx)("div",{className:"success",children:Object(G.jsxs)("div",{className:"container",children:[Object(G.jsx)(Y.a,{className:"successIcon"}),Object(G.jsx)("h1",{className:"title",children:"Success"}),Object(G.jsx)("p",{children:"Your exchange order has been placed successfully and will be processed soon."}),Object(G.jsx)("button",{className:"btn",onClick:function(){return e(1)},children:"Home"})]})})};var z=function(){var e,t,n,a,r=q(),i=r.fetchPayMethods,s=r.fetchAmount,u=r.setAmount,d=r.sendRequest,l=Object(o.c)((function(e){return e.app})),j=Object(o.c)((function(e){return e.app})),b=j.step,h=j.error,v=j.sellAmount,p=j.buyAmount,m=Object(c.useCallback)(function(e,t){var n;return function(){for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];var i=this;n&&clearTimeout(n),n=setTimeout((function(){n=null,e.apply(i,c)}),t)}}(s,500),[]);Object(c.useEffect)((function(){i()}),[]);var O=function(e){var t=e.target.value;u({base:e.target.name,sellAmount:"invoice"===e.target.name?t:l.amount,buyAmount:"withdraw"===e.target.name?t:l.amount}),t&&m()};return Object(G.jsx)("div",{className:"app",children:Object(G.jsxs)("div",{className:"appWraper",children:[1===b&&Object(G.jsxs)("div",{className:"container",children:[Object(G.jsxs)("div",{className:"appHome",children:[Object(G.jsxs)("div",{className:"sell",children:[Object(G.jsx)("h2",{className:"title",children:"Sell"}),Object(G.jsx)("div",{children:Object(G.jsx)("select",{value:l.invoicePayMethod,onChange:function(e){u({invoicePayMethod:+e.target.value}),v&&m()},children:null===(e=l.payMethods)||void 0===e||null===(t=e.invoice)||void 0===t?void 0:t.map((function(e){return Object(G.jsx)("option",{name:e.name,value:e.id,children:e.name},e.id)}))})}),Object(G.jsxs)("div",{className:"textField",children:[Object(G.jsx)("input",{name:"invoice",type:"text",value:l.sellAmount,onChange:O,disabled:l.loading}),l.loading&&Object(G.jsx)(V,{})]})]}),Object(G.jsxs)("div",{className:"buy",children:[Object(G.jsx)("h2",{className:"title",children:"Buy"}),Object(G.jsx)("div",{children:Object(G.jsx)("select",{value:l.withdrawPayMethod,onChange:function(e){u({withdrawPayMethod:+e.target.value}),p&&m()},children:null===(n=l.payMethods)||void 0===n||null===(a=n.withdraw)||void 0===a?void 0:a.map((function(e){return Object(G.jsx)("option",{name:e.name,value:e.id,children:e.name},e.id)}))})}),Object(G.jsxs)("div",{className:"textField",children:[Object(G.jsx)("input",{name:"withdraw",value:l.buyAmount,type:"text",onChange:O}),l.loading&&Object(G.jsx)(V,{})]})]})]}),h&&Object(G.jsx)("div",{style:{color:"red",marginBottom:14},children:h.message}),Object(G.jsx)("button",{className:"btn",onClick:function(){d()},disabled:!v||l.loading,children:"Exchange"})]}),2===b&&Object(G.jsx)(J,{}),3===b&&Object(G.jsx)(W,{})]})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};s.a.render(Object(G.jsx)(r.a.StrictMode,{children:Object(G.jsx)(o.a,{store:x,children:Object(G.jsx)(z,{})})}),document.getElementById("root")),K()}},[[74,1,2]]]);
//# sourceMappingURL=main.963ac915.chunk.js.map